<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>Veda</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description" content=""/>
		<meta name="author" content=""/>

		<!--link href="/css/bootstrap.min.css" rel="stylesheet"/-->
		
		<!-- Bootswatch themes -->
		<!--link href="/css/amelia.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/cerulean.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/cosmo.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/cyborg.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/darkly.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/flatly.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/journal.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/lumen.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/paper.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/readable.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/sandstone.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/simplex.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/slate.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/spacelab.bootstrap.min.css" rel="stylesheet"/-->
		<!--link href="/css/superhero.bootstrap.min.css" rel="stylesheet"/-->
		<link href="/css/united.bootstrap.min.css" rel="stylesheet"/>
		<!--link href="/css/yeti.bootstrap.min.css" rel="stylesheet"/-->

		<link href="/css/veda.css" rel="stylesheet"/>

		<meta http-equiv="pragma" content="no-cache" />
		<meta http-equiv="cache-control" content="no-cache" />
	</head>
	<body style="padding: 0px 0px 30px;">

		<nav role="navigation" class="navbar navbar-inverse" id="navigation">
			<div class="container-fluid" id="nav-container">
				<a href="#/" class="navbar-brand"><img src="/img/veda-logo.png" style="position:relative; top:-3px"/></a>
				<!--a href="#/" class="navbar-brand"><strong>veda</strong></a-->
				<ul class="nav navbar-nav navbar-left" id="menu">
					<li id="document">
						<a i18n="[Document]" label="[Document]" href="#/document/mnd-d:RomanKarpov">Документ</a>
					</li>
					<li id="document2">
						<a i18n="[Document2]" label="[Document2]" href="#/document2/mnd-d:RomanKarpov">Документ2</a>
					</li>
					<li id="console">	
						<a i18n="[Console]" href="#/console">Консоль</a>
					</li>
					<li id="search">	
						<a i18n="[Search]" href="#/search">Поиск</a>
					</li>
					<li id="tests">
						<a i18n="[Tests]" href="/tests">Тесты</a>
					</li>
				</ul>
				<a class="btn btn-xs btn-success navbar-btn navbar-left" id="set-trace">
					<i class="glyphicon glyphicon-flash"></i> Trace
				</a>
				<a class="btn btn-xs btn-danger navbar-btn navbar-right" id="logout">
					<i class="glyphicon glyphicon-log-out"></i> <span i18n="[Logout]">Выйти</span>
				</a>				
				<div id="user-info" class="navbar-right"></div>
			</div>
		</nav>

		<!-- Main container -->
		<div id="main" class="container-fluid"></div>

		<!-- Main container -->
		<div id="main2" class="container-fluid"></div>

		
		<br />
		<!-- Footer -->
		<nav style="min-height:20px;" class="navbar navbar-fixed-bottom" id="copyright">
			<footer>
				<div class="container-fluid" style="background-color: white; border-top: 1px solid lightgray">
					<a href="http://www.semantic-machines.com" i18n="[Semantic machines]">© Смысловые машины.</a>
					<span i18n="[License]">Лицензия</span>
					<a alt="GNU General Public License version 3 official text" href="http://www.gnu.org/licenses/gpl.html">GPLv3.</a>
				</div>
			</footer>
		</nav>

		<!-- Javascript -->

		<!-- Utils & UI -->
		<script src="/js/browser/jquery.js"></script>
		<script src="/js/browser/jquery.i18n.min.js"></script>
		<script src="/js/browser/bootstrap.min.js"></script>
		<script src="/js/browser/cookie.js"></script>
		<script src="/js/browser/sha256.js"></script>
		<script src="/js/browser/util.js"></script>
		<script src="/js/browser/jquery.autosize.min.js"></script>
		
		<!-- Veda browser & server -->
		<script src="/js/common/riot.js"></script>
		<script src="/js/common/util.js"></script>
		<script src="/js/common/register_module.js"></script>
		<script src="/js/common/veda_spa.js"></script>
		<script src="/js/common/app_model.js"></script>
		<script src="/js/common/console_model.js"></script>
		<script src="/js/common/individual_model.js"></script>
		<script src="/js/common/document_model.js"></script>
		<script src="/js/common/document_model2.js"></script>
		<script src="/js/common/user_model.js"></script>
		<script src="/js/common/search_model.js"></script>
		<script src="/js/common/class_model.js"></script>

		<!-- Veda browser only -->
		<script src="/js/browser/backend.js"></script>
		<script src="/js/browser/console_presenter.js"></script>
		<script src="/js/browser/document_presenter.js"></script>
		<script src="/js/browser/document_presenter2.js"></script>		
		<script src="/js/browser/saved_search_presenter.js"></script>
		<script src="/js/browser/search_presenter.js"></script>
		<script src="/js/browser/individual_presenter.js"></script>
		<script src="/js/browser/user_presenter.js"></script>
		<script src="/js/browser/app_presenter.js"></script>
		
		<script type="text/javascript">
			$(function(){
				Veda({/* configuration object */});
			});
		</script>

		<!-- Templates -->

		<!-- Login -->
		<script type="html/template" id="login-template">
			<div class="container-fluid" id="login-form">
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3 col-lg-6 col-lg-offset-3">
						<h3>Представьтесь</h3>
						<form role="form" id="credentials">
							<div class="form-group">
								<label for="login">Логин</label>
								<input id="login" required="required" type="text" name="login" class="form-control"/>
							</div>
							<div class="form-group">
								<label for="password">Пароль</label>
								<input id="password" required="required" type="password" name="password" autofocus="autofocus" class="form-control"/>
							</div>
							<button type="submit" id="submit" class="btn btn-primary">Войти</button>
						</form>
					</div>
				</div>
			</div>
		</script>

		<!-- Welcome -->
		<script type="html/template" id="wellcome-template">
			<div class="jumbotron well">
				<div class="container-fluid">
					<h1><span class="text-info">Добро пожаловать в Veda!</span></h1>
					<p span class="text-info">Veda - это крупномасштабная документоориентированная система управления предприятием</p>
					<p><a class="btn btn-primary btn-lg" href="#/search">Поехали</a></p>
				</div>
			</div>
		</script>

		<!-- Console template -->
		<script type="html/template" id="console-template">
			<div class="container-fluid" id="console">
				<h3 i18n="[Javascript console]">Консоль JavaScript</h3>
				<form role="form">
					<div class="form-group row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<label i18n="[Script]" for="script">Скрипт</label>
							<textarea rows="10" class="form-control" autofocus="autofocus" id="script" bound>{script}</textarea>
						</div>
					</div>
					<div class="form-group row">
						<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
							<select class="form-control" id="runat" bound>
								<option i18n="[Browser]" value="browser">Браузер</option>
								<option i18n="[Server]" value="server">Сервер</option>
							</select>
						</div>
						<button type="submit" class="btn btn-success" id="run" i18n="[Run]">Выполнить!</button>
						<button type="reset" class="btn" id="reset" i18n="[Reset]">Сброс</button>
					</div>
				</form>
				<hr />
				<p><strong><span i18n="[Result]">Результат</span> <span class="text-muted">(<span id="time" bound>{time}</span> msec)</span></label></strong></p>
				<pre id="result" bound>{result}</pre>
			</div>
		</script>

		<!-- Individual template -->
		<script type="html/template" id="individual-template">
			<span id="individual-label"></span>
			<div class="container-fluid" id="individual-properties"></div>
			<br/>
		</script>
		
		<!-- Individual label template -->
		<script type="html/template" id="individual-label-template">
			<a data-toggle="popover" href="#/document/{uri}"><strong>{label}</strong></a>
		</script>

		<!-- Individual single property template -->
		<script type="html/template" id="individual-single-property-template">
			<span class="text-muted">{label}: </span>
			<span>{values};</span>
		</script>	

		<!-- Document template -->
		<script type="html/template" id="document-template">
			<div id="document" class="container-fluid">
				<div id="document-label"></div>
				<div id="document-properties"></div>
				<br>
				<div class="well well-sm">
					<button type="button" class="btn btn-default" id="edit-document" i18n="[Edit]">Редактировать</button>
				</div>
			</div>
		</script>
		
		<!-- Document label template -->
		<script type="html/template" id="document-label-template">
			<h4 id="label">{label}<small> <a href="{uri}"><i class="glyphicon glyphicon-share-alt"></i></a></small></h4>
		</script>
		
		<!-- Document single property template -->
		<script type="html/template" id="document-single-property-template">
			<div class="row">
				<div class="col-xs-4 col-sm-4 col-md-3 col-lg-3 text-right">
					<strong><a data-toggle="popover" href="{uri}">{label}</a></strong>
				</div>
				<div class="col-xs-8 col-sm-8 col-md-9 col-lg-9">
					{values}
				</div>
			</div>
			<hr style="margin:1px; border-color:transparent">
		</script>	

		<!-- Current user template -->
		<script type="html/template" id="current-user-template">
			<p class="navbar-text navbar-right">
				<a href="#/document/{user.id}" class="navbar-link" id="current-user"><i class="glyphicon glyphicon-user"></i> {user.rdfs:label}</a>
			</p>
			<div class="navbar-right btn-group" id="preferred-language">
				{languages}
			</div>
		</script>

		<script type="html/template" id="language-template">
			<label id="{rdf:value.0}" class="btn btn-xs btn-info navbar-btn">
				{rdfs:label}
			</label>
		</script>

		<!-- Search template -->
		<script type="html/template" id="search-template">
			<div id="search">
				<div class="well no-margin">
					<div class="container-fluid">
						<form method="GET" role="form" class="form-horizontal">
							<div class="input-group">
								<input id="q" bound value="{q}" type="text" name="q" class="form-control" autofocus="autofocus"/>
								<span class="input-group-btn">
									<button class="btn btn-default" type="button" id="save-search"><i class="glyphicon glyphicon-star-empty"></i></button>
									<button type="submit" id="search-submit" class="btn btn-primary" i18n="[Search]">Найти</button>
								</span>
							</div>
						</form>
					</div>
				</div>
				<div class="container-fluid" id="search-results" style="display: none">
					<h3 class="text-center"><span i18n="[Search results]">Результаты поиска</span>
						(<span id="results_count" bound>{results_count}</span>)
					</h3>
					<ul class="no-marks">
						<li>
							<label class="checkbox-inline">
								<input type="checkbox" id="select-all"> <span i18n="[Select all]">Выбрать все</span>
							</label>
						</li>
					</ul>
					<hr class="thin-margin"/>
					<ol id="search-results-list"></ol>
					<hr/>
					<div class="text-center">
						<ul class="pagination" id="pager"></ul>
					</div>
				</div>
				<div class="alert alert-warning" id="not-found" style="display: none">
					<strong i18n="[Empty!]">Пусто!</strong> <span i18n="[Nothing found]">По вашему запросу ничего не найдено. Пожалуйста, учточните запрос.</span>
				</div>				
			</div>
		</script>
		
		<script type="html/template" id="search-select-template">
			<label class="checkbox-inline">
				<input type="checkbox"> &nbsp;
			</label>		
		</script>
		
		<!-- Generic class template -->
		<script type="html/template" id="generic-class-template">
			<div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-md-4">
								<h3 class="panel-title" property="_class.rdfs:label"></h3>
							</div>
							<div class="col-md-8 text-right text-muted">
								<h3 class="panel-title" property="document.id"></h3>
							</div>  
						</div>
					</div>
					<div class="panel-body properties">
						<h3 property="document.rdfs:label"><div>
					</div>
				</div>
			</div>
		</script>
		
		<!-- Generic property template -->
		<script type="html/template" id="property-template">
			<div class="container-fluid">
				<div>
					<dl>
						<dt>
							<span class="text-muted" href="#/document/{property.id}" data-toggle="popover">{property.rdfs:label}</span>
							<button type="button" class="btn btn-link edit add">Добавить</button></dt>
						<dd class="values"></dd>
					</dl>
				</div>
			</div>
		</script>
		
		<!-- String property template -->
		<script type="html/template" id="string-property-template">
			<div class="container-fluid">
				<div>
					<dl>
						<dt>
							<span class="text-muted" href="#/document/{property.id}" data-toggle="popover">{property.rdfs:label}</span>
							<button type="button" class="btn btn-link edit add">Добавить</button></dt>
						<dd class="values"></dd>
					</dl>
				</div>
			</div>
		</script>

		<!-- String value template -->
		<script type="html/template" id="string-value-template">
			<div>
				<div class="view">{value}</div>
				<div class="edit input-group">
					<span style="font-size:10px; font-weight:bold" class="input-group-addon btn btn-default dropdown-toggle language-selector" data-toggle="dropdown">{value.language} <span class="caret"></span></span>
					<ul class="dropdown-menu dropdown-menu-left language-list" role="menu">
					</ul>
					<textarea class="form-control" bound data-language="{value.language}">{value}</textarea>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>
		
		<!-- Datetime value template -->
		<script type="html/template" id="datetime-value-template">
			<div>
				<div class="view">{value}</div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-time"></i></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Integer value template -->
		<script type="html/template" id="integer-value-template">
			<div>
				<div class="view">{value}</div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><strong>10</strong></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Decimal value template -->
		<script type="html/template" id="decimal-value-template">
			<div>
				<div class="view">{value}</div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><strong>0.1</strong></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Boolean value template -->
		<script type="html/template" id="boolean-value-template">
			<div>
				<div class="view">{value}</div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-ok"></i></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Object value template -->
		<script type="html/template" id="object-value-template">
			<div>
				<div class="view">
					<a data-toggle="popover" href="#/document/{value.id}">{value.rdfs:label}</a>
					<a href="" class="toggle-expand"><i class="glyphicon glyphicon-collapse-down"></i></a>
				</div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default search-component" ><i class="glyphicon glyphicon-search"></i></span>
					<input type="text" class="form-control" value="{value.id}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Search modal -->
		<div class="modal" id="search-modal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<!--div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title" id="myModalLabel">Поиск объекта</h4>
					</div-->
					<div class="modal-body">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary pull-left" id="ok" data-dismiss="modal">Ok</button>
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal">Отмена</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Actions template -->
		<script type="html/template" id="actions">
			<div>
				<div class="well well-sm">
					<button type="button" class="btn btn-primary" id="edit" i18n="[Edit]">Редактировать</button>
					<button type="button" class="btn btn-success" id="save" i18n="[Save]">Сохранить</button>
					<button type="button" class="btn btn-default" id="cancel" i18n="[Cancel]">Отмена</button>
				</div>
			</div> 
		</script>
		
		<script type="html/template" id="string">
			<div>
				<div class="well well-sm">
					<button type="button" class="btn btn-primary" id="edit" i18n="[Edit]">Редактировать</button>
					<button type="button" class="btn btn-success" id="save" i18n="[Save]">Сохранить</button>
					<button type="button" class="btn btn-default" id="cancel" i18n="[Cancel]">Отмена</button>
				</div>
			</div> 
		</script>







		<!-- String control template -->
		<script type="html/template" id="string-control-template">
			<div>
				<div class="view" bound></div>
				<div class="edit input-group">
					<span style="font-size:10px; font-weight:bold" class="input-group-addon btn btn-default dropdown-toggle language-selector" data-toggle="dropdown"> <span class="caret"></span></span>
					<ul class="dropdown-menu dropdown-menu-left language-list" role="menu">
					</ul>
					<textarea class="form-control" bound rows="1"></textarea>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
					<span class="input-group-addon btn btn-default add">
						<i class="glyphicon glyphicon-plus"></i>
					</span>
				</div>
			</div>
		</script>
		
		<!-- Datetime control template -->
		<script type="html/template" id="datetime-control-template">
			<div>
				<div class="view" bound></div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-time"></i></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Integer control template -->
		<script type="html/template" id="integer-control-template">
			<div>
				<div class="view" bound></div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><strong>10</strong></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Decimal control template -->
		<script type="html/template" id="decimal-control-template">
			<div>
				<div class="view" bound></div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><strong>0.1</strong></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- Boolean control template -->
		<script type="html/template" id="boolean-control-template">
			<div>
				<div class="view" bound></div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-ok"></i></span>
					<input type="text" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<!-- File control template -->
		<script type="html/template" id="file-control-template">
			<div>
				<div class="view" bound></div>
				<div class="edit input-group">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-ok"></i></span>
					<input type="file" class="form-control" value="{value}" bound />
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>






		
	</body>
</html>
