<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>Veda</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description" content=""/>
		<meta name="author" content=""/>
		<link href="/css/bootstrap.min.css" rel="stylesheet"/>
		<link href="/css/veda.css" rel="stylesheet"/>
		<meta http-equiv="pragma" content="no-cache" />
		<meta http-equiv="cache-control" content="no-cache" />
	</head>
	<body style="padding: 0px 0px 30px;">

		<nav role="navigation" class="navbar navbar-inverse" id="navigation">
			<div class="container-fluid" id="nav-container">
				<a href="#/" class="navbar-brand"><img src="/img/veda-logo.png" style="position:relative; top:-3px"/></a>
				<ul class="nav navbar-nav navbar-left" id="menu">
					<li id="document">
						<a i18n="[Document]" label="[Document]" href="#/document/mondi-data:RomanKarpov">Документ</a>
					</li>
					<li id="document2">
						<a i18n="[Document2]" label="[Document2]" href="#/document2/mondi-data:RomanKarpov">Документ2</a>
					</li>
					<li id="console">	
						<a i18n="[Console]" href="#/console">Консоль</a>
					</li>
					<li id="search">	
						<a i18n="[Search]" href="#/search">Поиск</a>
					</li>
					<li id="tests">
						<a i18n="[Tests]" href="/tests">Тесты</a>
					</li>
				</ul>
				<a class="btn btn-xs btn-success navbar-btn navbar-left" id="set-trace">
					<i class="glyphicon glyphicon-flash"></i> Trace
				</a>
				<a class="btn btn-xs btn-danger navbar-btn navbar-right" id="logout">
					<i class="glyphicon glyphicon-log-out"></i> <span i18n="[Logout]">Выйти</span>
				</a>				
				<div id="user-info" class="navbar-right"></div>
			</div>
		</nav>

		<!-- Main container -->
		<div id="main" class="container-fluid"></div>

		<!-- Main container -->
		<div id="main2" class="container-fluid"></div>

		
		<br />
		<!-- Footer -->
		<nav style="min-height:20px;" class="navbar navbar-fixed-bottom" id="copyright">
			<footer>
				<div class="container-fluid" style="background-color: white; border-top: 1px solid lightgray">
					<a href="http://www.semantic-machines.com" i18n="[Semantic machines]">© Смысловые машины.</a>
					<span i18n="[License]">Лицензия</span>
					<a alt="GNU General Public License version 3 official text" href="http://www.gnu.org/licenses/gpl.html">GPLv3.</a>
				</div>
			</footer>
		</nav>

		<!-- Javascript -->

		<!-- Utils & UI -->
		<script src="/js/browser/jquery.js"></script>
		<script src="/js/browser/jquery.i18n.min.js"></script>
		<script src="/js/browser/bootstrap.min.js"></script>
		<script src="/js/browser/cookie.js"></script>
		<script src="/js/browser/sha256.js"></script>
		<script src="/js/browser/util.js"></script>
		<script src="/js/browser/jquery.autosize.min.js"></script>
		
		<!-- Veda browser & server -->
		<script src="/js/common/riot.js"></script>
		<script src="/js/common/util.js"></script>
		<script src="/js/common/register_module.js"></script>
		<script src="/js/common/veda_spa.js"></script>
		<script src="/js/common/app_model.js"></script>
		<script src="/js/common/console_model.js"></script>
		<script src="/js/common/individual_model.js"></script>
		<script src="/js/common/document_model.js"></script>
		<script src="/js/common/document_model2.js"></script>
		<script src="/js/common/user_model.js"></script>
		<script src="/js/common/search_model.js"></script>
		<script src="/js/common/class_model.js"></script>

		<!-- Veda browser only -->
		<script src="/js/browser/backend.js"></script>
		<script src="/js/browser/console_presenter.js"></script>
		<script src="/js/browser/document_presenter.js"></script>
		<script src="/js/browser/document_presenter2.js"></script>		
		<script src="/js/browser/saved_search_presenter.js"></script>
		<script src="/js/browser/search_presenter.js"></script>
		<script src="/js/browser/individual_presenter.js"></script>
		<script src="/js/browser/user_presenter.js"></script>
		<script src="/js/browser/app_presenter.js"></script>
		
		<script type="text/javascript">
			$(function(){
				Veda({/* configuration object*/});
			});
		</script>

		<!-- Templates -->

		<!-- Login -->
		<script type="html/template" id="login-template">
			<div class="container-fluid" id="login-form">
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3 col-lg-6 col-lg-offset-3">
						<h3>Представьтесь</h3>
						<form role="form" id="credentials">
							<div class="form-group">
								<label for="login">Логин</label>
								<input id="login" required="required" type="text" name="login" class="form-control"/>
							</div>
							<div class="form-group">
								<label for="password">Пароль</label>
								<input id="password" required="required" type="password" name="password" autofocus="autofocus" class="form-control"/>
							</div>
							<button type="submit" id="submit" class="btn btn-primary">Войти</button>
						</form>
					</div>
				</div>
			</div>
		</script>

		<!-- Welcome -->
		<script type="html/template" id="wellcome-template">
			<div class="jumbotron well">
				<div class="container-fluid">
					<h1><span class="text-info">Добро пожаловать в Veda!</span></h1>
					<p span class="text-info">Veda - это крупномасштабная документоориентированная система управления предприятием</p>
					<p><a class="btn btn-primary btn-lg" href="#/search">Поехали</a></p>
				</div>
			</div>
		</script>

		<!-- Console template -->
		<script type="html/template" id="console-template">
			<div class="container-fluid" id="console">
				<h3 i18n="[Javascript console]">Консоль JavaScript</h3>
				<form role="form">
					<div class="form-group row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<label i18n="[Script]" for="script">Скрипт</label>
							<textarea rows="10" class="form-control" autofocus="autofocus" id="script" bound>{script}</textarea>
						</div>
					</div>
					<div class="form-group row">
						<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
							<select class="form-control" id="runat" bound>
								<option i18n="[Browser]" value="browser">Браузер</option>
								<option i18n="[Server]" value="server">Сервер</option>
							</select>
						</div>
						<button type="submit" class="btn btn-success" id="run" i18n="[Run]">Выполнить!</button>
						<button type="reset" class="btn" id="reset" i18n="[Reset]">Сброс</button>
					</div>
				</form>
				<hr />
				<p><strong><span i18n="[Result]">Результат</span> <span class="text-muted">(<span id="time" bound>{time}</span> msec)</span></label></strong></p>
				<pre id="result" bound>{result}</pre>
			</div>
		</script>

		<!-- Individual template -->
		<script type="html/template" id="individual-template">
			<div id="individual-label"></div>
			<div class="container-fluid" id="individual-properties"></div>
			<br/>
		</script>
		
		<!-- Individual label template -->
		<script type="html/template" id="individual-label-template">
			<a data-toggle="popover" href="#/document/{uri}"><strong>{label}</strong></a>
		</script>

		<!-- Individual single property template -->
		<script type="html/template" id="individual-single-property-template">
			<span class="text-muted">{label}: </span>
			<span>{values};</span>
		</script>	

		<!-- Document template -->
		<script type="html/template" id="document-template">
			<div id="document" class="container-fluid">
				<div id="document-label"></div>
				<div id="document-properties"></div>
				<br>
				<div class="well well-sm">
					<button type="button" class="btn btn-default" id="edit-document" i18n="[Edit]">Редактировать</button>
				</div>
			</div>
		</script>
		
		<!-- Document label template -->
		<script type="html/template" id="document-label-template">
			<h4 id="label">{label}<small> <a href="{uri}"><i class="glyphicon glyphicon-share-alt"></i></a></small></h4>
		</script>
		
		<!-- Document single property template -->
		<script type="html/template" id="document-single-property-template">
			<div class="row">
				<div class="col-xs-4 col-sm-4 col-md-3 col-lg-3 text-right">
					<strong><a data-toggle="popover" href="{uri}">{label}</a></strong>
				</div>
				<div class="col-xs-8 col-sm-8 col-md-9 col-lg-9">
					{values}
				</div>
			</div>
			<hr style="margin:1px; border-color:transparent">
		</script>	

		<!-- Editor template -->
		<script type="html/template" id="editor-template">
			<div id="editor" class="container-fluid">
				<div id="editor-properties"></div>
				<br>
				<div class="well well-sm">
					<button type="button" class="btn btn-default" id="save" i18n="[Save]">Сохранить</button>
				</div>
			</div>
		</script>
		
		<!-- Editor single property template -->
		<script type="html/template" id="editor-single-property-template">
			<div class="row">
				<div class="col-xs-4 col-sm-4 col-md-3 col-lg-3 text-right">
					<strong><a data-toggle="popover" href="#/document/{uri}">{label}</a></strong>
				</div>
				<div class="col-xs-8 col-sm-8 col-md-9 col-lg-9">
					{values}
					<input type="text" value="" id="{uri}" class="form-control" />
				</div>
			</div>
			<hr style="margin:7px;">
		</script>

		<!-- Current user template -->
		<script type="html/template" id="current-user-template">
			<p class="navbar-text navbar-right">
				<a href="#/document/{user.id}" class="navbar-link" id="current-user"><i class="glyphicon glyphicon-user"></i> {user.rdfs:label}</a>
			</p>
			<div class="navbar-right btn-group" id="preferred-language">
				{languages}
			</div>
		</script>

		<script type="html/template" id="language-template">
			<label id="{rdf:value.0}" class="btn btn-xs btn-info navbar-btn">
				{rdfs:label}
			</label>
		</script>

		<!-- Search template -->
		<script type="html/template" id="search-template">
			<div id="search">
				<div class="well">
					<div class="container-fluid">
						<form method="GET" role="form">
							<div class="row">
								<div class="col-xs-7 col-sm-7 col-sm-offset-1 col-md-8 col-md-offset-1 col-lg-8 col-lg-offset-1">
									<div class="input-group">
										<input id="q" bound value="{q}" type="text" name="q" class="form-control" autofocus="autofocus"/>
										<span class="input-group-btn">
											<button class="btn btn-default" type="button" id="save-search"><i class="glyphicon glyphicon-star-empty"></i></button>
										</span>
									</div>
								</div>
								<div class="col-xs-5 col-sm-4 col-md-3 col-lg-3">
									<button type="submit" id="search-submit" class="btn btn-primary" i18n="[Search]">Найти</button>
								</div>
							</div>
						</form>
					</div>
				</div>
				<div class="container-fluid" id="search-results" style="display: none">
					<h3 class="text-center"><span i18n="[Search results]">Результаты поиска</span>
						(<span id="results_count" bound>{results_count}</span>)
					</h3>
					<hr/>
					<ol id="search-results-list"></ol>
					<hr/>
					<div class="text-center">
						<ul class="pagination" id="pager"></ul>
					</div>
				</div>
				<div class="alert alert-warning" id="not-found" style="display: none">
					<strong i18n="[Empty!]">Пусто!</strong> <span i18n="[Nothing found]">По вашему запросу ничего не найдено. Пожалуйста, учточните запрос.</span>
				</div>				
			</div>
		</script>		
		
		<script type="html/template" id="generic-class-template">
			<div class="container-fluid">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-md-6">
								<h3 class="panel-title" data-property="_class.rdfs:label">Персона</h3>
							</div>
							<div class="col-md-6 text-right text-muted">
								<h3 class="panel-title" data-property="document.id">mondi-data:RomanKarpov</h3>
							</div>  
						</div>
					</div>
					<div class="panel-body properties">
						<h3 data-property="document.rdfs:label"><div>
					</div>
				</div>
			</div>
		</script>

		<script type="html/template" id="property-template">
			<div class="{property.id} container-fluid">
				<div>
					<dl>
						<dt>
							<span class="text-muted" href="#/document/{property.id}" data-toggle="popover">{property.rdfs:label}</span>
							<button type="button" class="btn btn-link input-control add">Добавить</button></dt>
							<!--button type="button" class="btn btn-info btn-xs input-control add"><i class="glyphicon glyphicon-plus"></i></button></dt-->
						<dd class="values"></dd>
					</dl>
				</div>
			</div>
		</script>

		<script type="html/template" id="string-property-template">
			<div class="{property.id} container-fluid">
				<div>
					<dl>
						<dt>
							<span class="text-muted" href="#/document/{property.id}" data-toggle="popover">{property.rdfs:label}</span>
						<dd class="values"></dd>
					</dl>
				</div>
			</div>
		</script>

		<script type="html/template" id="string-value-template">
			<div>
				<div class="value">{value}</div>
				<div class="input-group input-control">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-font"></i></span>
					<textarea class="form-control" bound data-property="{property.id}" data-index="{index}" data-language="{value.language}">{value}</textarea>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<script type="html/template" id="datetime-value-template">
			<div>
				<div class="value">{value}</div>
				<div class="input-group input-control">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-time"></i></span>
					<input type="text" class="form-control" value="{value}" bound data-property="{property.id}" data-index="{index}"/>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<script type="html/template" id="integer-value-template">
			<div>
				<div class="value">{value}</div>
				<div class="input-group input-control">
					<span class="input-group-addon btn btn-default"><strong>10</strong></span>
					<input type="text" class="form-control" value="{value}" bound data-property="{property.id}" data-index="{index}"/>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<script type="html/template" id="decimal-value-template">
			<div>
				<div class="value">{value}</div>
				<div class="input-group input-control">
					<span class="input-group-addon btn btn-default"><strong>0.1</strong></span>
					<input type="text" class="form-control" value="{value}" bound data-property="{property.id}" data-index="{index}"/>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<script type="html/template" id="boolean-value-template">
			<div>
				<div class="value">{value}</div>
				<div class="input-group input-control">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-ok"></i></span>
					<input type="text" class="form-control" value="{value}" bound data-property="{property.id}" data-index="{index}"/>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>

		<script type="html/template" id="object-value-template">
			<div>
				<div class="value"><a data-toggle="popover" href="#/document/{value.id}">{value.rdfs:label}</a></div>
				<div class="input-group input-control">
					<span class="input-group-addon btn btn-default"><i class="glyphicon glyphicon-search"></i></span>
					<input type="text" class="form-control" value="{value.id}" bound data-property="{property.id}" data-index="{index}"/>
					<span class="input-group-addon btn btn-default remove">
						<i class="glyphicon glyphicon-remove"></i>
					</span>
				</div>
			</div>
		</script>


		<script type="html/template" id="actions">
			<div class="container-fluid">
				<div class="well well-sm">
					<button type="button" class="btn btn-default" id="edit" i18n="[Edit]">Редактировать</button>
					<button type="button" class="btn btn-default" id="save" i18n="[Save]">Сохранить</button>
					<button type="button" class="btn btn-default" id="cancel" i18n="[Cancel]">Отмена</button>
				</div>
			</div> 
		</script>
		
	</body>
</html>
