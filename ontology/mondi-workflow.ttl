# baseURI: http://semantic-machines.com/veda/mondi-workflow
# imports: http://semantic-machines.com/veda/veda-workflow

# c14n-version: 3
@prefix mnd-wf: <http://semantic-machines.com/veda/mondi-workflow/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix v-wf: <http://semantic-machines.com/veda/veda-workflow/> .

<http://semantic-machines.com/veda/mondi-workflow>
  rdf:type owl:Ontology ;
  owl:imports <http://semantic-machines.com/veda/veda-workflow> ;
  owl:versionInfo "1.0" ;
  rdfs:label "Mondi workflow ontology"@en ;
  rdfs:label "Онтология бизнес процессов Монди"@ru ;
.

# --- begin ----------------------- NET Complex Route --------------------------------------- #
mnd-wf:net_complex_route
        rdf:type v-wf:Net ;
	v-wf:inputVariable mnd-wf:var_doc_id ;
	v-wf:inputVariable mnd-wf:var_initiator ;
	v-wf:inputVariable mnd-wf:var_coordinator_1 ;
	v-wf:inputVariable mnd-wf:var_coordinator_2 ;
	v-wf:inputVariable mnd-wf:var_coordinator_3 ;
	v-wf:inputVariable mnd-wf:var_signer_1 ;
	v-wf:inputVariable mnd-wf:var_reviewer_1 ;
	v-wf:localVariable mnd-wf:var_right_1 ;
        rdfs:label "Complex route"@en ;
        rdfs:label "Комплексный маршрут"@ru ;
	v-wf:consistsOf mnd-wf:ic1 ;
	v-wf:consistsOf mnd-wf:f_ic1_t1 ;
	v-wf:consistsOf mnd-wf:t1 ;
	v-wf:consistsOf mnd-wf:f_t1_oc1 ;
	v-wf:consistsOf mnd-wf:f_t1_t2 ;
	v-wf:consistsOf mnd-wf:t2 ;
	v-wf:consistsOf mnd-wf:f_t2_c1 ;
	v-wf:consistsOf mnd-wf:c1 ;
	v-wf:consistsOf mnd-wf:f_c1_t3 ;
	v-wf:consistsOf mnd-wf:c2 ;
	v-wf:consistsOf mnd-wf:f_c2_t8 ;
	v-wf:consistsOf mnd-wf:t3 ;
	v-wf:consistsOf mnd-wf:f_t3_c2 ;
	v-wf:consistsOf mnd-wf:f_t3_t4 ;
	v-wf:consistsOf mnd-wf:t4 ;
	v-wf:consistsOf mnd-wf:f_t4_c2 ;
	v-wf:consistsOf mnd-wf:f_t4_t5 ;
	v-wf:consistsOf mnd-wf:t5 ;
	v-wf:consistsOf mnd-wf:f_t5_c2 ;
	v-wf:consistsOf mnd-wf:f_t5_t6 ;
	v-wf:consistsOf mnd-wf:t6 ;
	v-wf:consistsOf mnd-wf:f_t6_c2 ;
	v-wf:consistsOf mnd-wf:f_t6_t7 ;
	v-wf:consistsOf mnd-wf:t7 ;
	v-wf:consistsOf mnd-wf:f_t7_c2 ;
	v-wf:consistsOf mnd-wf:f_t7_c3 ;
	v-wf:consistsOf mnd-wf:t8 ;
	v-wf:consistsOf mnd-wf:f_t8_c3 ;
	v-wf:consistsOf mnd-wf:f_t8_c1 ;
	v-wf:consistsOf mnd-wf:c3 ;
	v-wf:consistsOf mnd-wf:f_c3_t9 ;
	v-wf:consistsOf mnd-wf:t9 ;
	v-wf:consistsOf mnd-wf:f_t9_oc1 ;
	v-wf:consistsOf mnd-wf:oc1 ;
.
mnd-wf:var_initiator
        rdf:type v-wf:Variable ;
	v-wf:variableName "initiator" ;
        rdfs:label "Инициатор"@ru ;
.
mnd-wf:var_doc_id
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
        rdfs:label "документ"@ru ;
.
mnd-wf:var_coordinator_1
        rdf:type v-wf:Variable ;
	v-wf:variableName "coordinatorLevel1" ;
        rdfs:label "список согласующих 1 уровень"@ru ;
.
mnd-wf:var_coordinator_2
        rdf:type v-wf:Variable ;
	v-wf:variableName "coordinatorLevel2" ;
        rdfs:label "список согласующих 2 уровень"@ru ;
.
mnd-wf:var_coordinator_3
        rdf:type v-wf:Variable ;
	v-wf:variableName "coordinatorLevel3" ;
        rdfs:label "список согласующих 3 уровень"@ru ;
.
mnd-wf:var_signer_1
        rdf:type v-wf:Variable ;
	v-wf:variableName "signer" ;
        rdfs:label "подписывающий"@ru ;
.
mnd-wf:var_reviewer_1
        rdf:type v-wf:Variable ;
	v-wf:variableName "reviewer" ;
        rdfs:label "рассматривающий"@ru ;
.
mnd-wf:var_right_1
        rdf:type v-wf:Variable ;
	v-wf:variableName "originalRight" ;
.

# ------------------------------- NET Complex Route : Input Condition ----------------------------- #
mnd-wf:ic1 
	rdf:type v-wf:InputCondition ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:locationX "12"^^xsd:integer ;
	v-wf:locationY "512"^^xsd:integer ;
.
mnd-wf:f_ic1_t1
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t1 ;
.	

# ------------------------------- NET Complex Route : task "Проверить, запущен ли?" ---------------- #
mnd-wf:t1 
	rdf:type v-wf:Task ;
	rdfs:label "Проверить, запущен ли?" ;
	v-wf:executor mnd-wf:codelet_is_run ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:hasFlow mnd-wf:f_t1_t2 ;
	v-wf:hasFlow mnd-wf:f_t1_oc1 ;
	v-wf:split v-wf:XOR ;	
	v-wf:inputVariable mnd-wf:var_doc_id_t1 ;
	v-wf:startingMapping mnd-wf:map_task_1_b ;
	v-wf:locationX "84"^^xsd:integer ;
	v-wf:locationY "512"^^xsd:integer ;
.
mnd-wf:var_doc_id_t1
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:map_task_1_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t1 ;	
	v-wf:mappingExpression	"net.getVariableValue ('doc_id')" ;
.
mnd-wf:f_t1_oc1
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:oc1 ;
	v-wf:predicate "true () ";
.	
mnd-wf:f_t1_t2
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t2 ;
	v-wf:predicate "false ()" ;
.	

# ------------------------------- NET Complex Route : task "понизить права" ------------------------- #
mnd-wf:t2 
	rdf:type v-wf:Task ;
	rdfs:label "понизить права" ;
	v-wf:executor mnd-wf:codelet_down_right ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:hasFlow mnd-wf:f_t1_oc1 ;
	v-wf:inputVariable mnd-wf:var_doc_id_t2 ;
	v-wf:outputVariable mnd-wf:var_t2_rights ;
	v-wf:startingMapping mnd-wf:map_t2_b ;
	v-wf:completedMapping mnd-wf:map_t2_e ;
	v-wf:locationX "120"^^xsd:integer ;
	v-wf:locationY "348"^^xsd:integer ;
.
mnd-wf:var_doc_id_t2
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t2_rights
        rdf:type v-wf:Variable ;
	v-wf:variableName "rights" ;
.
mnd-wf:map_t2_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t2 ;	
	v-wf:mappingExpression	"net.getVariableValue ('docId')" ;
.
mnd-wf:map_t2_e
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_right_1 ;	
	v-wf:mappingExpression	"task.getVariableValue ('rights')" ;
.
mnd-wf:f_t2_c1
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c1 ;
.	

# ------------------------------- NET Complex Route : condition 1 ---------------------------------- #
mnd-wf:c1
	rdf:type v-wf:Condition ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:locationX "200"^^xsd:integer ;
	v-wf:locationY "348"^^xsd:integer ;
.
mnd-wf:f_c1_t3
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t3 ;
.
	
# ------------------------------- NET Complex Route : condition 2 ---------------------------------- #
mnd-wf:c2
	rdf:type v-wf:Condition ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:locationX "420"^^xsd:integer ;
	v-wf:locationY "76"^^xsd:integer ;
.
mnd-wf:f_c2_t8
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t8 ;
.
	
# ------------------------------- NET Complex Route : task "Согласование 1" ------------------------ #
mnd-wf:t3
	rdf:type v-wf:Task ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	rdfs:label "Согласование 1" ;
	v-wf:executor mnd-wf:executor_def_1 ;
	v-wf:subNet mnd-wf:net_agree;
	v-wf:locationX "272"^^xsd:integer ;
	v-wf:locationY "332"^^xsd:integer ;
	v-wf:hasFlow mnd-wf:f_t3_c2 ;
	v-wf:hasFlow mnd-wf:f_t3_t4 ;
	v-wf:split v-wf:XOR ;	
	v-wf:inputVariable mnd-wf:var_doc_id_t3 ;
	v-wf:outputVariable mnd-wf:var_t3_res ;
	v-wf:startingMapping mnd-wf:map_t3_b ;
.
mnd-wf:var_doc_id_t3
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t3_res
        rdf:type v-wf:Variable ;
	v-wf:variableName "result" ;
.
mnd-wf:map_t3_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t3 ;	
	v-wf:mappingExpression	"net.getVariableValue ('docId')" ;
.
mnd-wf:executor_def_1
	rdf:type v-wf:ExecutorDefinition ;
	v-s:scipt "net.getVariableValue ('coordinatorLevel1')" ;
.
mnd-wf:f_t3_c2
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c2 ;
	v-wf:predicate "eval (net.result == false)";
.	
mnd-wf:f_t3_t4
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t4 ;
	v-wf:predicate "eval (net.result == true)" ;
.

# ------------------------------- NET Complex Route : task "Согласование 2" ------------------------ #
mnd-wf:t4
	rdf:type v-wf:Task ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	rdfs:label "Согласование 2" ;
	v-wf:executor mnd-wf:executor_def_2 ;
	v-wf:subNet mnd-wf:net_agree;
	v-wf:locationX "368"^^xsd:integer ;
	v-wf:locationY "308"^^xsd:integer ;
	v-wf:hasFlow mnd-wf:f_t4_c2 ;
	v-wf:hasFlow mnd-wf:f_t4_t5 ;
	v-wf:split v-wf:XOR ;	
	v-wf:inputVariable mnd-wf:var_doc_id_t4 ;
	v-wf:outputVariable mnd-wf:var_t4_res ;
	v-wf:startingMapping mnd-wf:map_t4_b ;
.
mnd-wf:var_doc_id_t4
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t4_res
        rdf:type v-wf:Variable ;
	v-wf:variableName "result" ;
.
mnd-wf:map_t4_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t4 ;	
	v-wf:mappingExpression	"net.getVariableValue ('docId')" ;
.
mnd-wf:executor_def_2
	rdf:type v-wf:ExecutorDefinition ;
	v-s:scipt "net.getVariableValue ('coordinatorLevel2')" ;
.
mnd-wf:f_t4_c2
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c2 ;
	v-wf:predicate "eval (net.result == false)";
.	
mnd-wf:f_t4_t5
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t5 ;
	v-wf:predicate "eval (net.result == true)" ;
.

# ------------------------------- NET Complex Route : task "Согласование 3" ------------------------ #
mnd-wf:t5
	rdf:type v-wf:Task ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	rdfs:label "Согласование 3" ;
	v-wf:executor mnd-wf:executor_def_3 ;
	v-wf:subNet mnd-wf:net_agree;
	v-wf:locationX "452"^^xsd:integer ;
	v-wf:locationY "284"^^xsd:integer ;
	v-wf:hasFlow mnd-wf:f_t5_c2 ;
	v-wf:hasFlow mnd-wf:f_t5_t6 ;
	v-wf:split v-wf:XOR ;	
	v-wf:inputVariable mnd-wf:var_doc_id_t5 ;
	v-wf:outputVariable mnd-wf:var_t5_res ;
	v-wf:startingMapping mnd-wf:map_t5_b ;
.
mnd-wf:var_doc_id_t5
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t5_res
        rdf:type v-wf:Variable ;
	v-wf:variableName "result" ;
.
mnd-wf:map_t5_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t5 ;	
	v-wf:mappingExpression	"net.getVariableValue ('docId')" ;
.
mnd-wf:executor_def_3
	rdf:type v-wf:ExecutorDefinition ;
	v-s:scipt "net.getVariableValue ('coordinatorLevel3')" ;
.
mnd-wf:f_t5_c2
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c2 ;
	v-wf:predicate "eval (net.result == false)";
.	
mnd-wf:f_t5_t6
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t6 ;
	v-wf:predicate "eval (net.result == true)" ;
.

# ------------------------------- NET Complex Route : task "Подписание" ------------------------ #
mnd-wf:t6
	rdf:type v-wf:Task ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	rdfs:label "Подписание" ;
	v-wf:executor mnd-wf:executor_def_4 ;
	v-wf:subNet mnd-wf:net_sing;
	v-wf:locationX "572"^^xsd:integer ;
	v-wf:locationY "280"^^xsd:integer ;
	v-wf:hasFlow mnd-wf:f_t6_c2 ;
	v-wf:hasFlow mnd-wf:f_t6_t7 ;
	v-wf:split v-wf:XOR ;	
	v-wf:inputVariable mnd-wf:var_doc_id_t6 ;
	v-wf:outputVariable mnd-wf:var_t6_res ;
	v-wf:startingMapping mnd-wf:map_t6_b ;
.
mnd-wf:var_doc_id_t6
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t6_res
        rdf:type v-wf:Variable ;
	v-wf:variableName "result" ;
.
mnd-wf:map_t6_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t6 ;	
	v-wf:mappingExpression	"net.getVariableValue (docId)" ;
.
mnd-wf:executor_def_4
	rdf:type v-wf:ExecutorDefinition ;
	v-s:scipt "net.getVariableValue ('reviewer')" ;
.
mnd-wf:f_t6_c2
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c2 ;
	v-wf:predicate "eval (net.result == false)";
.	
mnd-wf:f_t6_t7
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t7 ;
	v-wf:predicate "eval (net.result == true)" ;
.

# ------------------------------- NET Complex Route : task "Рассмотрение" ------------------------ #
mnd-wf:t7
	rdf:type v-wf:Task ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	rdfs:label "Рассмотрение" ;
	v-wf:executor mnd-wf:executor_def_5 ;
	v-wf:subNet mnd-wf:net_review;
	v-wf:locationX "680"^^xsd:integer ;
	v-wf:locationY "288"^^xsd:integer ;
	v-wf:hasFlow mnd-wf:f_t7_c2 ;
	v-wf:hasFlow mnd-wf:f_t7_t8 ;
	v-wf:split v-wf:XOR ;	
	v-wf:inputVariable mnd-wf:var_doc_id_t7 ;
	v-wf:outputVariable mnd-wf:var_t7_res ;
	v-wf:startingMapping mnd-wf:map_t7_b ;
.
mnd-wf:var_doc_id_t7
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t7_res
        rdf:type v-wf:Variable ;
	v-wf:variableName "result" ;
.
mnd-wf:map_t7_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t7 ;	
	v-wf:mappingExpression	"net.getVariableValue ('docId')" ;
.
mnd-wf:executor_def_5
	rdf:type v-wf:ExecutorDefinition ;
	v-s:scipt "net.getVariableValue ('reviewer')" ;
.
mnd-wf:f_t7_c2
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c2 ;
	v-wf:predicate "eval (net.result == false)";
.	
mnd-wf:f_t7_c3
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c3 ;
	v-wf:predicate "eval (net.result == true)" ;
.

# ------------------------------- NET Complex Route : task "Доработать" ------------------------ #
mnd-wf:t8
	rdf:type v-wf:Task ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	rdfs:label "Доработать" ;
	v-wf:executor mnd-wf:executor_def_6 ;
	v-wf:subNet mnd-wf:net_review;
	v-wf:locationX "180"^^xsd:integer ;
	v-wf:locationY "208"^^xsd:integer ;
	v-wf:hasFlow mnd-wf:f_t8_c1 ;
	v-wf:hasFlow mnd-wf:f_t8_t3 ;
	v-wf:split v-wf:XOR ;	
	v-wf:inputVariable mnd-wf:var_doc_id_t8 ;
	v-wf:outputVariable mnd-wf:var_t8_res ;
	v-wf:startingMapping mnd-wf:map_t8_b ;
.
mnd-wf:var_doc_id_t8
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t8_res
        rdf:type v-wf:Variable ;
	v-wf:variableName "result" ;
.
mnd-wf:map_t8_b
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t8 ;	
	v-wf:mappingExpression	"net.getVariableValue ('docId')" ;
.
mnd-wf:executor_def_5
	rdf:type v-wf:ExecutorDefinition ;
	v-s:scipt "net.getVariableValue ('initiator')" ;
.
mnd-wf:f_t8_c3
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c3 ;
	v-wf:predicate "eval (net.result == false)";
.	
mnd-wf:f_t8_c1
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:c1 ;
	v-wf:predicate "eval (net.result == true)" ;
.

# ------------------------------- NET Complex Route : condition 3 ---------------------------------- #
mnd-wf:c3
	rdf:type v-wf:Condition ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:locationX "800"^^xsd:integer ;
	v-wf:locationY "296"^^xsd:integer ;
.
mnd-wf:f_c3_t9
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:t9 ;
.

# ------------------------------- NET Complex Route : task "восстановить права" ------------------------ #
mnd-wf:t9
	rdf:type v-wf:Task ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	rdfs:label "восстановить права" ;
	v-wf:executor mnd-wf:codelet_restore_right ;
	v-wf:subNet mnd-wf:net_review;
	v-wf:locationX "882"^^xsd:integer ;
	v-wf:locationY "296"^^xsd:integer ;
	v-wf:hasFlow mnd-wf:f_t9_oc1 ;
	v-wf:inputVariable mnd-wf:var_doc_id_t9 ;
	v-wf:inputVariable mnd-wf:var_t9_right ;
	v-wf:startingMapping mnd-wf:map_t9_b1 ;
	v-wf:startingMapping mnd-wf:map_t9_b2 ;
.
mnd-wf:var_doc_id_t9
        rdf:type v-wf:Variable ;
	v-wf:variableName "docId" ;
.
mnd-wf:var_t9_right
        rdf:type v-wf:Variable ;
	v-wf:variableName "originalRight" ;
.
mnd-wf:map_t9_b1
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id_t9 ;	
	v-wf:mappingExpression	"net.getVariableValue ('docId')" ;
.
mnd-wf:map_t9_b2
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_t9_right ;	
	v-wf:mappingExpression	"net.getVariableValue ('originalRight')" ;
.
mnd-wf:f_t9_oc1
	rdf:type v-wf:Flow ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:flowsInto mnd-wf:oc1 ;
.
	
# ------------------------------- NET Complex Route : Output Condition ---------------------------- #
mnd-wf:oc1 
	rdf:type v-wf:OutputCondition ;
	v-wf:belongsTo mnd-wf:net_complex_route ;
	v-wf:locationX "992"^^xsd:integer ;
	v-wf:locationY "324"^^xsd:integer ;
.

# ------------------------------- NET Complex Route : User Form ---------------------------- #
mnd-wf:ComplexRouteStartForm
	rdf:type rdfs:Class ;
	rdfs:subClassOf v-wf:StartForm ;
	rdfs:label "Стартовая форма сети Комплексный маршрут"@ru ;
	rdfs:label "Complex route start form"@en ;
.
mnd-wf:ComplexRouteStartForm_coordinator1
	rdf:type rdf:Property ;
	rdfs:label "согласующий 1 уровня"@ru ;
	rdfs:label "coordinator 1 level"@en ;
	rdfs:domain mnd-wf:ComplexRouteStartForm ;
	rdfs:range v-s:Appointment ;
.
mnd-wf:ComplexRouteStartForm_coordinator2
	rdf:type rdf:Property ;
	rdfs:label "согласующий 2 уровня"@ru ;
	rdfs:label "coordinator 3 level"@en ;
	rdfs:domain mnd-wf:ComplexRouteStartForm ;
	rdfs:range v-s:Appointment ;
.
mnd-wf:ComplexRouteStartForm_coordinator3
	rdf:type rdf:Property ;
	rdfs:label "согласующий 3 уровня"@ru ;
	rdfs:label "coordinator 3 level"@en ;
	rdfs:domain mnd-wf:ComplexRouteStartForm ;
	rdfs:range v-s:Appointment ;
.
mnd-wf:ComplexRouteStartForm_reviewer
	rdf:type rdf:Property ;
	rdfs:label "рассматривающий"@ru ;
	rdfs:label "reviewer"@en ;
	rdfs:domain mnd-wf:ComplexRouteStartForm ;
	rdfs:range v-s:Appointment ;
.
mnd-wf:ComplexRouteStartForm_signer
	rdf:type rdf:Property ;
	rdfs:label "подписывающий"@ru ;
	rdfs:label "signer"@en ;
	rdfs:domain mnd-wf:ComplexRouteStartForm ;
	rdfs:range v-s:Appointment ;
.
mnd-wf:ComplexRouteStartForm_Template
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон стартовых данных Комплексного маршрута"@ru ;
  rdfs:label "Complex route start form template"@en ;
  v-ui:forClass mnd-wf:ComplexRouteStartForm ;
  v-ui:template """
  <div>
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="row">
          <div class="col-md-6">
	        <span about="mnd-wf:ComplexRouteStartForm" property="rdfs:label">Стартовая форма</span>
  	      </div>  
          <div class="col-md-6 text-right text-muted">
                <a href="id"><span property="id">ID</span></a>
	      </div>  
	    </div>
      </div>
      <div class="panel-body">
        <div class="row">
            <div class="col-md-4">
               <strong class="text-muted" about="v-wf:process_initiator" property="rdfs:label">Инициатор</strong>
               <div rel="v-wf:process_initiator" template="mnd-d:AppointmentTemplate2">mnd-d:AppointmentTemplate2</div>
            </div>
            <div class="col-md-4">
               <strong class="text-muted" about="v-wf:processed_document" property="rdfs:label">Документ</strong>
               <div rel="v-wf:processed_document">Ссылка на документ</div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-4">
               <strong class="text-muted" about="mnd-wf:ComplexRouteStartForm_coordinator1" property="rdfs:label">Согласующие 1 уровня</strong>
               <div rel="mnd-wf:ComplexRouteStartForm_coordinator1" template="mnd-d:AppointmentTemplate2">mnd-d:AppointmentTemplate2</div>
            </div>
            <div class="col-md-4">
               <strong class="text-muted" about="mnd-wf:ComplexRouteStartForm_coordinator2" property="rdfs:label">Согласующие 2 уровня</strong>
               <div rel="mnd-wf:ComplexRouteStartForm_coordinator2" template="mnd-d:AppointmentTemplate2">mnd-d:AppointmentTemplate2</div>
            </div>
            <div class="col-md-4">
               <strong class="text-muted" about="mnd-wf:ComplexRouteStartForm_coordinator3" property="rdfs:label">Согласующие 3 уровня</strong>
               <div rel="mnd-wf:ComplexRouteStartForm_coordinator3" template="mnd-d:AppointmentTemplate2">mnd-d:AppointmentTemplate2</div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-4">
               <strong class="text-muted" about="mnd-wf:ComplexRouteStartForm_reviewer" property="rdfs:label">Рассматривающий</strong>
               <div rel="mnd-wf:ComplexRouteStartForm_reviewer" template="mnd-d:AppointmentTemplate2">mnd-d:AppointmentTemplate2</div>
            </div>
            <div class="col-md-4">
               <strong class="text-muted" about="mnd-wf:ComplexRouteStartForm_signer" property="rdfs:label">Подписывающий</strong>
               <div rel="mnd-wf:ComplexRouteStartForm_signer" template="mnd-d:AppointmentTemplate2">mnd-d:AppointmentTemplate2</div>
            </div>
        </div>
      </div>
      <div class="panel-footer">
        <button type="button" class="action btn btn-primary" id="edit" i18n="[Edit]">Редактировать</button>
        <button type="button" class="action btn btn-success" id="save" i18n="[Save]">Сохранить</button>
        <button type="button" class="action btn btn-default" id="cancel" i18n="[Cancel]">Отмена</button>
      </div>
    </div>
  </div>
  """ ;
.

mnd-wf:decomposition1
        rdf:type v-wf:Decomposition ;
	v-wf:forNet mnd-wf:net_complex_route ;
	v-wf:forFormClass mnd-wf:ComplexRouteStartForm ; 
	v-wf:startingMapping mnd-wf:map_decomposition1 ;	
	v-wf:startingMapping mnd-wf:map_decomposition2 ;	
	v-wf:startingMapping mnd-wf:map_decomposition3 ;	
	v-wf:startingMapping mnd-wf:map_decomposition4 ;	
	v-wf:startingMapping mnd-wf:map_decomposition5 ;	
	v-wf:startingMapping mnd-wf:map_decomposition6 ;	
.		

mnd-wf:map_decomposition1
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_doc_id ;	
	v-wf:mappingExpression	"doc.getValue ('v-wf:processed_document')" ;
.

mnd-wf:map_decomposition2
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_initiator ; 
	v-wf:mappingExpression	"doc.getValue ('v-wf:process_initiator')" ;
.

mnd-wf:map_decomposition3
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_coordinator_1 ;
	v-wf:mappingExpression	"doc.getValue ('mnd-wf:ComplexRouteStartForm_coordinator1')" ;
.

mnd-wf:map_decomposition4
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_coordinator_2 ;
	v-wf:mappingExpression	"doc.getValue ('mnd-wf:ComplexRouteStartForm_coordinator2')" ;
.

mnd-wf:map_decomposition5
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_coordinator_3 ;
	v-wf:mappingExpression	"doc.getValue ('mnd-wf:ComplexRouteStartForm_coordinator3')" ;
.

mnd-wf:map_decomposition6
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_reviewer ;
	v-wf:mappingExpression	"doc.getValue ('mnd-wf:ComplexRouteStartForm_reviewer)" ;
.

mnd-wf:map_decomposition7
	rdf:type v-wf:Mapping ;
	v-wf:mapsTo mnd-wf:var_signer ;
	v-wf:mappingExpression	"doc.getValue ('mnd-wf:ComplexRouteStartForm_signer)" ;
.

# --- end -------------------------- NET Complex Route ----------------------------------- end ---- #

# ------------------------------- NET Agree --------------------------------------------------------- #
mnd-wf:net_agree
        rdf:type v-wf:Net ;
	v-wf:inputVariable mnd-wf:var_doc_id ;
	v-wf:inputVariable mnd-wf:var_initiator ;
	v-wf:inputVariable mnd-wf:var_coordinator ;
        rdfs:label "Маршрут подписание"@ru ;
.

# ------------------------------ CODELET : "запущен ли процесс" ------------------------------------- #
mnd-wf:codelet_is_run
	rdf:type v-s:Codelet ;
	rdfs:label "запущен ли процесс" ;
	v-s:script """
public Element execute(Element inData, List<YParameter> inParams, List<YParameter> outParams) throws CodeletExecutionException 
{
        // set the inputs passed in the base class
        setInputs(inData, inParams, outParams);
        
        int max;
        
        try{
            max = Integer.parseInt((String) getParameterValue("max"));
        }
        catch (ClassCastException cce) {
            throw new CodeletExecutionException("Exception casting input values to " +
                                                "int types.") ;
        }
                
        //create a random number between 1 and max (input)
        Random generator = new Random();
        int r = generator.nextInt(max) + 1;
        
        //set the value for the output parameter
        setParameterValue("r", String.valueOf(r));
        
        return getOutputData();
};
""" ;
.
	
# ------------------------------ CODELET : "понизить права" ----------------------------- #
mnd-wf:codelet_down_right
	rdf:type v-s:Codelet ;
	rdfs:label "понизить права" ;
	v-s:script """
public Element execute(Element inData, List<YParameter> inParams, List<YParameter> outParams) throws CodeletExecutionException 
{
        return getOutputData();
};
""" ;
.	

# ------------------------------ CODELET : "восстановить права" ----------------------------- #
mnd-wf:codelet_restore_right
	rdf:type v-s:Codelet ;
	rdfs:label "восстановить права" ;
	v-s:script """
public Element execute(Element inData, List<YParameter> inParams, List<YParameter> outParams) throws CodeletExecutionException 
{
        return getOutputData();
};
""" ;
.	

